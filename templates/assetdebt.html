{% extends "layout.html" %}
{% block title %}Assets & Debts{% endblock %}
{% block content %}
    
    <div class="content-card">
        <h2>Assets</h2>
        <p>List things you own that have value.</p>
        
        <!-- Add Asset Form -->
        <form action="{{ url_for('assetdebt') }}" method="post" style="margin-top: 2rem; border-bottom: 1px solid #eee; padding-bottom: 2rem; margin-bottom: 2rem;">
            <input type="hidden" name="action" value="add">
            <input type="hidden" name="form_type" value="asset">
            <div class="form-row">
                <div class="form-group" style="flex: 2;">
                    <label for="asset_name">Asset Name</label>
                    <input type="text" id="asset_name" name="asset_name" placeholder="e.g., Savings Account" required>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="asset_value">Current Value</label>
                    <input type="number" step="0.01" id="asset_value" name="value" placeholder="e.g., 5000" required>
                </div>
            </div>
            <div style="text-align: right;">
                <button type="submit" class="btn btn-primary">Add Asset</button>
            </div>
        </form>

        <!-- Assets Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Asset</th>
                        <th style="text-align: right;">Value</th>
                        <th style="text-align: center;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for asset in assets %}
                    <tr>
                        <td>{{ asset.asset_name }}</td>
                        <td style="text-align: right;">{{ user.currency or '₹' }} {{ "%.2f"|format(asset.value) }}</td>
                        <td style="text-align: center;">
                            <form action="{{ url_for('assetdebt') }}" method="post" style="display:inline;">
                                 <input type="hidden" name="action" value="delete">
                                 <input type="hidden" name="form_type" value="asset">
                                 <input type="hidden" name="item_id" value="{{ asset.id }}">
                                 <button type="submit" class="btn-danger-small">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% else %}
                    <tr><td colspan="3" style="text-align: center;">No assets added yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="content-card">
        <h2>Liabilities</h2>
        <p>List any money you owe, such as loans or credit card debt.</p>
        
        <!-- Add Liability Form -->
        <form action="{{ url_for('assetdebt') }}" method="post" style="margin-top: 2rem; border-bottom: 1px solid #eee; padding-bottom: 2rem; margin-bottom: 2rem;">
            <input type="hidden" name="action" value="add">
            <input type="hidden" name="form_type" value="liability">
            <div class="form-row">
                <div class="form-group" style="flex: 2;">
                    <label for="liability_name">Liability Name</label>
                    <input type="text" id="liability_name" name="liability_name" placeholder="e.g., Credit Card Debt" required>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="amount_owed">Amount Owed</label>
                    <input type="number" step="0.01" id="amount_owed" name="amount_owed" placeholder="e.g., 2000" required>
                </div>
            </div>
            <div style="text-align: right;">
                <button type="submit" class="btn btn-primary">Add Liability</button>
            </div>
        </form>

        <!-- Liabilities Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Liability</th>
                        <th style="text-align: right;">Amount Owed</th>
                        <th style="text-align: center;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for liability in liabilities %}
                    <tr>
                        <td>{{ liability.liability_name }}</td>
                        <td style="text-align: right;">{{ user.currency or '₹' }} {{ "%.2f"|format(liability.amount_owed) }}</td>
                        <td style="text-align: center;">
                             <form action="{{ url_for('assetdebt') }}" method="post" style="display:inline;">
                                 <input type="hidden" name="action" value="delete">
                                 <input type="hidden" name="form_type" value="liability">
                                 <input type="hidden" name="item_id" value="{{ liability.id }}">
                                 <button type="submit" class="btn-danger-small">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% else %}
                    <tr><td colspan="3" style="text-align: center;">No liabilities added yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="content-card" style="text-align: center;">
        <h2>Net Worth Summary</h2>
        <p style="font-size: 2.5rem; font-weight: 700; color: #1a1a1a; margin: 1rem 0;">
            {{ user.currency or '₹' }} {{ "%.2f"|format(net_worth) }}
        </p>
        <p style="margin-top: 0;">(Total Assets - Total Liabilities)</p>
    </div>

<style>
    /* Same style as the investments page for consistency */
    .btn-danger-small {
        background-color: #fee2e2;
        color: #b91c1c;
        border: 1px solid #fecaca;
        padding: 0.3rem 0.8rem;
        border-radius: 6px;
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }
    .btn-danger-small:hover {
        background-color: #fecaca;
        color: #991b1b;
    }
</style>

{% endblock %}